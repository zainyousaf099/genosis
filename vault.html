<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vault - jan 2024</title>

  <!-- CSS Files -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/dashboard.css" />
  <link rel="stylesheet" href="assets/css/sidebar.css" />
  
  <style>
    :root {
      --accent: #2563eb;
      --muted: #6b7280;
      --card-border: #e5e7eb;
      --bg: #fafbfd;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      border-bottom: 1px solid #d1d5db;
    }

    .page-container {
      display: flex;
      min-height: 100vh;
      background: var(--bg);
    }

    /* Top Bar Integrated */
    .top-bar-integrated {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 48px;
      background: #f3f4f6;
      border-bottom: 1px solid #d1d5db;
      display: flex;
      align-items: stretch;
      z-index: 100;
    }

    .top-bar-left {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 0 16px;
      flex-shrink: 0;
    }

    .top-bar-logo {
      width: 20px;
      height: 20px;
      opacity: 0.7;
    }

    .top-bar-input {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
      border: 1px solid #d1d5db;
      outline: none;
      background: white;
      padding: 4px 8px;
      border-radius: 4px;
    }

    .top-bar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 16px;
      flex-shrink: 0;
    }

    .top-bar-icon {
      width: 24px;
      height: 24px;
      cursor: pointer;
      border-radius: 6px;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
      opacity: 0.7;
      padding: 2px;
    }

    .top-bar-icon:hover {
      background: #e5e7eb;
      opacity: 1;
    }

    .top-bar-icon img {
      width: 16px;
      height: 16px;
    }

    .top-bar-plus-icon {
      width: 20px;
      height: 20px;
      padding: 1px;
      cursor: pointer;
      opacity: 0.7;
      margin-left: auto;
    }

    .top-bar-plus-icon:hover {
      opacity: 1;
    }

    /* Top Bar Tabs Section */
    .top-bar-tabs {
      display: flex;
      align-items: center;
      gap: 8px;
      flex: 1;
      padding: 0 12px;
      overflow: hidden;
    }

    .tabs-container {
      display: flex;
      align-items: center;
      gap: 2px;
      flex: 1;
      overflow-x: auto;
      overflow-y: hidden;
    }

    .tab-item {
      display: flex;
      align-items: center;
      gap: 2px;
      padding: 8px 12px;
      background: #e5e7eb;
      border-radius: 9px 9px 0 0;
      font-size: 13px;
      color: #6b7280;
      cursor: pointer;
      white-space: nowrap;
      min-width: 144px;
      justify-content: space-between;
      height: 100%;
      border-bottom: 2px solid transparent;
      position: relative;
    }

    .tab-item.active {
      background: white;
      color: #111827;
      font-weight: 600;
      border-bottom: none;
      border-left: none;
      border-right: none;
      margin-left: 10px;
    }

    .tab-item .tab-close {
      width: 14px;
      height: 14px;
      opacity: 0.6;
      cursor: pointer;
      flex-shrink: 0;
    }

    .tab-item .tab-close:hover {
      opacity: 1;
    }

    .tab-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
    }

    .tab-action-icon {
      width: 16px;
      height: 16px;
      opacity: 0.6;
      cursor: pointer;
      padding: 2px;
    }

    .tab-action-icon:hover {
      opacity: 1;
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal-dialog {
      background: white;
      border-radius: 12px;
      padding: 0;
      width: 400px;
      max-width: 90vw;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px 16px 24px;
      border-bottom: 1px solid #e5e7eb;
    }

    .modal-title {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .modal-close {
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-close:hover {
      background: #f3f4f6;
    }

    .modal-body {
      padding: 20px 24px;
    }

    .vault-name-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 14px;
      outline: none;
      box-sizing: border-box;
    }

    .vault-name-input:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: 16px 24px 20px 24px;
    }

    .btn-cancel {
      background: white;
      border: 1px solid #d1d5db;
      color: #374151;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }

    .btn-cancel:hover {
      background: #f9fafb;
    }

    .btn-create {
      background: #2563eb;
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }

    .btn-create:hover {
      background: #1d4ed8;
    }

    /* Folder Info Modal Styles */
    .info-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .info-item:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: 600;
      color: #374151;
      font-size: 14px;
      width: 150px;
      flex-shrink: 0;
    }

    .info-value {
      color: #6b7280;
      font-size: 14px;
      flex: 1;
      text-align: right;
    }

    .main-container {
      display: flex;
      margin-top: 48px; /* Only integrated top bar */
      height: calc(100vh - 48px);
    }

    #sidebar-container {
      display: flex;
      height: calc(100vh - 48px);
      overflow: hidden;
    }

    /* Sidebar Content */
    .sidebar-content {
      width: 280px;
      background: #fff;
      border-right: 1px solid #d1d5db;
      padding: 18px;
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    .documents-section {
      margin-bottom: 20px;
    }

    .documents-content {
      min-height: 400px;
      overflow-y: auto;
    }

    .documents-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 0;
      cursor: pointer;
    }

    .documents-title {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
    }

    .chevron-icon {
      width: 14px;
      height: 14px;
      opacity: 0.6;
    }

    /* Context Menu Styles */
    .context-menu {
      position: fixed;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      padding: 4px;
      z-index: 10000;
      display: none;
      min-width: 200px;
    }

    .context-menu.show {
      display: block;
    }

    .context-menu-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
      color: #111827;
      position: relative;
    }

    .context-menu-item:hover {
      background: #f3f4f6;
    }

    .menu-arrow {
      width: 12px;
      height: 12px;
      opacity: 0.5;
      margin-left: auto;
    }

    .context-submenu {
      position: absolute;
      left: 100%;
      top: 0;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      padding: 4px;
      min-width: 150px;
      margin-left: 8px;
      display: none;
    }

    .context-menu-item:hover .context-submenu {
      display: block;
      animation: fadeIn 0.2s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Keep submenu visible when hovering over it */
    .context-submenu:hover {
      display: block !important;
    }

    .context-submenu {
      pointer-events: auto;
    }

    .sidebar-footer-actions {
      margin-top: auto;
      flex-shrink: 0;
    }


    .documents-content {
      min-height: 200px;
      color: #6b7280;
      font-size: 13px;
    }

    .sidebar-footer-actions {
      display: flex;
      flex-direction: row;
      gap: 12px;
      align-items: center;
      justify-content: flex-start;
      margin-top: auto;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
    }

    .sidebar-footer-actions .icon-wrapper {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      cursor: pointer;
    }

    .sidebar-footer-actions .icon-wrapper:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .sidebar-footer-actions .footer-icon {
      width: 18px;
      height: 18px;
      opacity: 0.7;
    }

    /* Main Content Area */
    .page-content {
      flex: 1;
      padding: 0;
      overflow: auto;
      background: #fff;
    }

    .content-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #9ca3af;
      font-size: 16px;
    }

    /* Page Content Component Styles */
    .page-content-container {
      padding: 40px;
      max-width: 1200px;
      margin: 0 auto;
      margin-bottom: 100px;
      min-height: calc(100vh - 100px);
    }

    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 24px;
    }

    .page-title-section {
      flex: 1;
    }

    .page-title {
      font-size: 32px;
      font-weight: 600;
      color: #111827;
      margin: 0 0 8px 0;
    }

    .page-breadcrumb {
      font-size: 14px;
      color: #6b7280;
    }

    .page-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .page-action-icon {
      width: 32px;
      height: 32px;
      cursor: pointer;
      border-radius: 6px;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-action-icon:hover {
      background: #e5e7eb;
    }

    .page-action-icon img {
      width: 16px;
      height: 16px;
    }

    /* Right Sidebar */
    .right-sidebar {
      position: fixed;
      top: 0;
      right: -320px;
      width: 320px;
      height: 100vh;
      background: white;
      box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
      transition: right 0.3s ease-in-out;
      z-index: 1000;
      display: flex;
      flex-direction: column;
    }

    .right-sidebar.show {
      right: 0;
    }

    /* Backdrop for right sidebar */
    .right-sidebar::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease-in-out;
      z-index: -1;
    }

    .right-sidebar.show::before {
      opacity: 1;
      pointer-events: auto;
    }

    .right-sidebar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 16px;
      border-bottom: 1px solid #e5e7eb;
      background-color: white;
    }

    .right-sidebar-close {
      width: 18px;
      height: 18px;
      cursor: pointer;
      opacity: 0.6;
      transition: opacity 0.2s;
    }

    .right-sidebar-close:hover {
      opacity: 1;
    }

    .right-sidebar-icon {
      width: 20px;
      height: 20px;
      opacity: 0.6;
      cursor: pointer;
    }

    .right-sidebar-icon:hover {
      opacity: 1;
    }

    .right-sidebar-content {
      padding: 16px;
      overflow-y: auto;
      flex: 1;
      background-color: white;
    }

    .right-sidebar-section {
      margin-bottom: 24px;
    }

    .right-sidebar-section:last-child {
      margin-bottom: 0;
    }

    .right-sidebar-title {
      font-size: 12px;
      font-weight: 600;
      color: #374151;
      text-transform: uppercase;
      margin-bottom: 12px;
      letter-spacing: 0.5px;
    }

    .right-sidebar-item {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 8px 0;
      font-size: 14px;
      color: #6b7280;
    }

    .referenced-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 0;
      cursor: pointer;
    }

    .referenced-item:hover {
      color: #111827;
    }

    .referenced-item img {
      width: 16px;
      height: 16px;
      opacity: 0.5;
    }

    /* Tasks Component */
    .tasks-component {
      background: white;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 24px;
    }

    .tasks-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .tasks-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
      margin: 0;
    }

    .tasks-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .add-column-btn {
      background: white;
      border: 1px solid #d1d5db;
      color: #374151;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }

    .add-column-btn:hover {
      background: #f9fafb;
    }

    .tasks-icon {
      width: 18px;
      height: 18px;
      opacity: 0.6;
      cursor: pointer;
    }

    .tasks-table-container {
      margin-bottom: 16px;
    }

    .tasks-table {
      width: 100%;
      border-collapse: collapse;
    }

    .tasks-table thead {
      background: #f9fafb;
    }

    .tasks-table th {
      padding: 12px;
      text-align: left;
      font-size: 12px;
      font-weight: 600;
      color: #6b7280;
      border-bottom: 1px solid #e5e7eb;
    }

    .tasks-table td {
      padding: 12px;
      text-align: left;
      font-size: 14px;
      color: #111827;
      border-bottom: 1px solid #e5e7eb;
    }

    .tasks-table .empty-state {
      text-align: center;
      color: #9ca3af;
      font-style: italic;
    }

    .tasks-table .task-row {
      background: #f9fafb;
    }

    .task-input {
      width: 100%;
      border: none;
      background: transparent;
      padding: 4px;
      font-size: 14px;
      outline: none;
    }

    .task-input[type="date"] {
      cursor: pointer;
    }

    .task-input[type="date"]::-webkit-calendar-picker-indicator {
      cursor: pointer;
      opacity: 0;
    }

    .card-date-input {
      cursor: pointer;
    }

    .card-date-input::-webkit-calendar-picker-indicator {
      opacity: 0;
    }

    .add-row-btn {
      background: white;
      border: 1px solid #d1d5db;
      color: #374151;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }

    .add-row-btn:hover {
      background: #f9fafb;
    }

    /* Cards Section */
    .cards-section {
      margin-bottom: 24px;
      display: none; /* Hidden by default */
    }

    .cards-title {
      font-size: 24px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 20px;
    }

    .cards-container {
      position: relative;
      min-height: 400px;
      background: #fafafa;
      border-radius: 12px;
      padding: 20px;
    }

    .card {
      position: absolute;
      width: 250px;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      cursor: move;
      transition: transform 0.2s;
      background: white;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
      margin: 0;
    }

    .card-delete:hover {
      opacity: 1;
    }

    .card-priority {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .card-description {
      font-size: 14px;
      color: #374151;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .card-footer {
      font-size: 11px;
      color: #9ca3af;
    }

    .page-hashtag {
      color: #6b7280;
      font-size: 14px;
      margin-bottom: 24px;
      display: none; /* Hidden by default */
    }

    .notes-editor {
      min-height: 40px;
      padding: 12px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      outline: none;
      cursor: text;
      background: #f9fafb;
    }

    .notes-editor:focus {
      border-color: #2563eb;
      background: white;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .notes-editor:empty:before {
      content: "Add notes...";
      color: #9ca3af;
    }

    /* Bottom Navigation */
    .page-bottom-nav {
      position: sticky;
      bottom: 0;
      background: white;
      border-top: 1px solid #e5e7eb;
      padding: 12px 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-top: 40px;
      z-index: 100;
    }

    .nav-pages-container {
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: flex-start;
      overflow-x: auto;
      padding: 0 12px;
      max-width: 50%;
      margin: 0 auto;
    }

    .nav-pages-container::-webkit-scrollbar {
      height: 6px;
    }

    .nav-pages-container::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    .nav-pages-container::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 3px;
    }

    .nav-pages-container::-webkit-scrollbar-thumb:hover {
      background: #555;
    }

    .nav-page-item {
      padding: 4px 12px;
      border-radius: 6px;
      cursor: pointer;
      color: #6b7280;
      font-size: 14px;
      white-space: nowrap;
      transition: all 0.2s;
      text-decoration: none;
    }

    .nav-page-item:hover {
      background: #f3f4f6;
    }

    .nav-page-item.active {
      color: #2563eb;
      text-decoration: underline;
      font-weight: 500;
    }

    /* Context Menu for Page Items */
    .page-context-menu {
      position: absolute;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      box-shadow: 0 2px 12px rgba(0, 0, aves);
      z-index: 2000;
      display: none;
      min-width: 120px;
      padding: 4px-cd0;
    }

    .page-context-menu-item {
      padding: 8px 16px;
      cursor: pointer;
      font-size: 14px;
      color: #374151;
      transition: background 0.2s;
    }

    .page-context-menu-item:hover {
      background: #f3f4f6;
    }

    .nav-arrow {
      width: 16px;
      height: 16px;
      opacity: 0.6;
      cursor: pointer;
    }

    .nav-add-circle {
      width: 24px !important;
      height: 24px !important;
      opacity: 1 !important;
      border-radius: 50%;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }

    /* Vault Settings Modal */
    .vault-settings-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
    }

    .vault-settings-modal {
      background: white;
      border-radius: 12px;
      width: 600px;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .vault-settings-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 1px solid #e5e7eb;
    }

    .vault-settings-title {
      font-size: 18px;
      font-weight: ailerons600;
      color: #111827;
      margin: 0;
    }

    .vault-settings-close {
      width: 20px;
      height: 20px;
      cursor: pointer;
      opacity: 0.6;
    }

    .vault-settings-tabs {
      display: flex;
      border-bottom: 1px solid #e5e7eb;
      padding: 0 24px;
    }

    .vault-settings-tab {
      padding: 12px 16px;
      cursor: pointer;
      color: #6b7280;
      font-size: 14px;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
      transition: all 0.2s;
    }

    .vault-settings-tab.active {
      color: #2563eb;
      border-bottom-color: #2563eb;
    }

    .vault-settings-content {
      padding: 24px;
      overflow-y: auto;
      flex: 1;
    }

    .filter-section {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .filter-group {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .filter-select {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
      background: white;
    }

    .filter-input-wrapper {
      flex: 2;
      position: relative;
      display: flex;
      align-items: center;
    }

    .filter-input {
      flex: 1;
      padding: 8px 36px 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
    }

    .filter-clear {
      position: absolute;
      right: 8px;
      width: 16px;
      height: 16px;
      cursor: pointer;
      opacity: 0.4;
    }

    .filter-clear:hover {
      opacity: 0.8;
    }

    .add-filter-btn {
      padding: 8px 12px;
      border: 1px dashed #d1d5db;
      border-radius: 6px;
      background: transparent;
      color: #6b7280;
      cursor: pointer;
      font-size: 14px;
      width: fit-content;
    }

    .add-filter-btn:hover {
      background: #f9fafb;
      border-color: #9ca3af;
    }

    .columns-section {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .columns-title {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
      margin: 0;
    }

    .columns-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .column-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-radius: 6px;
      background: #f3f4f6;
      color: #374151;
    }

    .column-item.required {
      background: #fee2e2;
      color: #991b1b;
    }

    .column-eye-icon {
      width: 18px;
      height: 18px;
      opacity: 0.6;
    }

    .vault-settings-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: 20px 24px;
      border-top: 1px solid #e5e7eb;
    }

    .vault-settings-btn {
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
    }

    .vault-settings-btn.secondary {
      background: #f3f4f6;
      color: #374151;
    }

    .vault-settings-btn.secondary:hover {
      background: #e5e7eb;
    }

    .vault-settings-btn.primary {
      background: #2563eb;
      color: white;
    }

    .vault-settings-btn.primary:hover {
      background: #1d4ed8;
    }

    .nav-page-name {
      font-size: 14px;
      color: #2563eb;
      text-decoration: nonw;
      color: gray;
    }

    .nav-add {
      position: fixed;
      right: 24px;
      bottom: 80px;
      width: 56px;
      height: 56px;
      background: #2563eb;
      border-radius: 50%;
      padding: 16px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-add img {
      width: 24px;
      height: 24px;
    }

    /* Add Menu List */
    .add-menu-list {
      position: fixed;
      bottom: 145px; /* Position above the FAB (FAB bottom: 80px + FAB height: 56px + gap) */
      right: 24px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
      padding: 8px 0;
      z-index: 101; /* Above FAB */
      min-width: 180px;
      display: none; /* Hidden by default */
    }

    .add-menu-list.show {
      display: block;
    }

    .add-menu-list .menu-item {
      padding: 12px 20px;
      font-size: 15px;
      color: #374151;
      cursor: pointer;
      white-space: nowrap;
      transition: background-color 0.15s ease;
    }

    .add-menu-list .menu-item:hover {
      background: #f3f4f6; /* Light gray background on hover */
    }

    .add-menu-list .menu-item:first-child {
      border-radius: 12px 12px 0 0;
    }

    .add-menu-list .menu-item:last-child {
      border-radius: 0 0 12px 12px;
    }

  </style>
</head>
<body>
  <!-- Top Bar with Integrated Tabs -->
  <div class="top-bar-integrated" id="topBarIntegrated">
    <!-- Left Section: Navigation -->
    <div class="top-bar-left">
      <img src="assets/images/vault.svg" alt="Logo" class="top-bar-logo">
      <input type="text" class="top-bar-input" value="jan 2024" />
      <img src="assets/images/sort.svg" alt="Sort" class="top-bar-icon" title="Sort">
      <img src="assets/images/chevron-left.svg" alt="Back" class="top-bar-icon" title="Back">
      <img src="assets/images/chevron-right.svg" alt="Forward" class="top-bar-icon" title="Forward">
    </div>

    <!-- Middle Section: Tabs -->
    <div class="top-bar-tabs">
      <div class="tabs-container" id="tabsContainer"></div>
    </div>

    <!-- Right Section: Actions -->
    <div class="top-bar-right">
      <div class="top-bar-icon" onclick="toggleRightSidebar()" title="Information">
        <img src="assets/images/book-02.svg" alt="Information">
      </div>
    </div>
  </div>

  <!-- Main Navbar Container (loaded via navbar.js) -->
  <div id="main-navbar-container"></div>

  <!-- Main Container -->
  <div class="main-container" style="margin-left: 40px;">
    <!-- Sidebar Component (loaded via JavaScript) -->
    <div id="sidebar-container"></div>

    <!-- Main Content Area -->
    <section class="page-content">
      <div class="content-placeholder">
        Select a document to view
      </div>
    </section>

  </div>

  <!-- Workspace/Folder Modal -->
  <div id="workspaceModal" class="modal-overlay">
    <div class="modal-dialog">
      <div class="modal-header">
        <h3 class="modal-title" id="workspaceModalTitle">New Workspace</h3>
        <button class="modal-close" onclick="closeWorkspaceModal()">
          <img src="assets/images/block-circle.svg" alt="Close" style="width: 16px; height: 16px;">
        </button>
      </div>
      <div class="modal-body">
        <input type="text" id="workspaceNameInput" class="vault-name-input" placeholder="Enter name..." />
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeWorkspaceModal()">Cancel</button>
        <button class="btn-create" onclick="confirmWorkspace()">Create</button>
      </div>
    </div>
  </div>

  <!-- Folder Information Modal -->
  <div id="folderInfoModal" class="modal-overlay">
    <div class="modal-dialog" style="width: 500px;">
      <div class="modal-header">
        <h3 class="modal-title">Folder Information</h3>
        <button class="modal-close" onclick="closeFolderInfoModal()">
          <img src="assets/images/block-circle.svg" alt="Close" style="width: 16px; height: 16px;">
        </button>
      </div>
      <div class="modal-body" style="padding: 24px;">
        <div class="info-item">
          <span class="info-label">Name:</span>
          <span class="info-value" id="folderInfoName">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">ID:</span>
          <span class="info-value" id="folderInfoId">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Created Date:</span>
          <span class="info-value" id="folderInfoDate">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Created By:</span>
          <span class="info-value" id="folderInfoBy">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Parent ID:</span>
          <span class="info-value" id="folderInfoParent">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Full Path:</span>
          <span class="info-value" id="folderInfoPath">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Size:</span>
          <span class="info-value" id="folderInfoSize">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Files:</span>
          <span class="info-value" id="folderInfoFiles">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Size Breakdown:</span>
          <span class="info-value" id="folderInfoBreakdown">-</span>
        </div>
        <div class="info-item">
          <span class="info-label">Description:</span>
          <span class="info-value" id="folderInfoDesc">-</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Add New Card Modal -->
  <div id="cardModal" class="modal-overlay">
    <div class="modal-dialog" style="width: 600px;">
      <div class="modal-header">
        <h3 class="modal-title">Add New Card</h3>
        <button class="modal-close" onclick="closeCardModal()">
          <img src="assets/images/block-circle.svg" alt="Close" style="width: 16px; height: 16px;">
        </button>
      </div>
      <div class="modal-body" style="padding: 24px;">
        <div style="margin-bottom: 16px;">
          <input type="text" id="cardTitleInput" class="vault-name-input" placeholder="Title" style="margin-bottom: 12px;" />
        </div>
        <div style="margin-bottom: 16px;">
          <textarea id="cardDescriptionInput" class="vault-name-input" placeholder="Description" style="min-height: 100px; resize: vertical; font-family: inherit;"></textarea>
        </div>
        <div style="margin-bottom: 16px; position: relative;">
          <select id="cardAssigneeInput" class="vault-name-input" style="padding-right: 30px; appearance: none; background-image: url('assets/images/chevron-down.svg'); background-repeat: no-repeat; background-position: right 8px center; background-size: 16px;">
            <option value="">Select Assignee</option>
            <option value="user1">User 1</option>
            <option value="user2">User 2</option>
            <option value="user3">User 3</option>
          </select>
        </div>
        <div style="margin-bottom: 16px;">
          <input type="text" id="cardPriorityInput" class="vault-name-input" placeholder="Priority" style="margin-bottom: 12px;" />
        </div>
        <div style="position: relative;">
          <input type="date" id="cardDateInput" class="vault-name-input card-date-input" placeholder="mm/dd/yyyy" style="padding-right: 30px;" />
          <img src="assets/images/calendar-icon.svg" alt="Calendar" class="card-calendar-icon" style="width: 16px; height: 16px; position: absolute; right: 8px; top: 50%; transform: translateY(-50%); opacity: 0.5; cursor: pointer;">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeCardModal()">Cancel</button>
        <button class="btn-create" onclick="saveCard()">Save</button>
      </div>
    </div>
  </div>

  <!-- Hidden File Input -->
  <input type="file" id="imageUploadInput" style="display: none;" accept="image/*" multiple />
  <input type="file" id="fileUploadInput" style="display: none;" multiple />

  <!-- Vault Settings Modal -->
  <div id="vaultSettingsModal" class="vault-settings-overlay" style="display: none;">
    <div class="vault-settings-modal">
      <div class="vault-settings-header">
        <h2 class="vault-settings-title">Settings</h2>
        <img src="assets/images/close-icon.svg" alt="Close" class="vault-settings-close" onclick="closeVaultSettings()">
      </div>

      <div class="vault-settings-tabs">
        <div class="vault-settings-tab active" onclick="switchSettingsTab('filters')">Advanced Filters</div>
        <div class="vault-settings-tab" onclick="switchSettingsTab('display')">Display</div>
      </div>

      <!-- Advanced Filters Tab -->
      <div class="vault-settings-content active" id="filtersTab">
        <div class="filter-section">
          <div class="filter-row" id="filtersContainer">
            <div class="filter-group">
              <select class="filter-select">
                <option>Name</option>
                <option>Description</option>
                <option>Assignee</option>
                <option>Priority</option>
                <option>Due Date</option>
              </select>
              <select class="filter-select">
                <option>Is</option>
                <option>Is not</option>
                <option>Contains</option>
                <option>Does not contain</option>
              </select>
              <div class="filter-input-wrapper">
                <input type="text" class="filter-input" placeholder="Enter value">
                <img src="assets/images/close-icon.svg" alt="Clear" class="filter-clear">
              </div>
            </div>
          </div>
          <button class="add-filter-btn" onclick="addFilterRow()">+ Add New Filter</button>
        </div>
      </div>

      <!-- Display Tab -->
      <div class="vault-settings-content" id="displayTab" style="display: none;">
        <div class="columns-section">
          <h3 class="columns-title">Columns</h3>
          <div class="columns-list" id="columnsList">
            <div class="column-item required">
              <span>Name</span>
              <img src="assets/images/eye.svg" alt="Visible" class="column-eye-icon">
            </div>
            <div class="column-item">
              <span>Description</span>
              <img src="assets/images/eye.svg" alt="Visible" class="column-eye-icon">
            </div>
            <div class="column-item">
              <span>Assignee</span>
              <img src="assets/images/eye.svg" alt="Visible" class="column-eye-icon">
            </div>
            <div class="column-item">
              <span>Priority</span>
              <img src="assets/images/eye.svg" alt="Visible" class="column-eye-icon">
            </div>
            <div class="column-item">
              <span>Due Date</span>
              <img src="assets/images/eye.svg" alt="Visible" class="column-eye-icon">
            </div>
            <div class="column-item">
              <span>Created</span>
              <img src="assets/images/eye.svg" alt="Visible" class="column-eye-icon">
            </div>
            <div class="column-item">
              <span>Edited</span>
              <img src="assets/images/eye.svg" alt="Visible" class="column-eye-icon">
            </div>
          </div>
        </div>
      </div>

      <div class="vault-settings-footer">
        <button class="vault-settings-btn secondary" onclick="clearAllFilters()">Clear all</button>
        <button class="vault-settings-btn primary" onclick="saveAsNewView()">Save as new view</button>
      </div>
    </div>
  </div>

  <!-- JavaScript Files -->
  <script src="assets/js/dashboard.js"></script>
  <script src="assets/js/card.js"></script>
  <script>
    // Load sidebar component
    function loadSidebar() {
      fetch('components/sidebar.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('sidebar-container').innerHTML = html;
        })
        .catch(error => {
          console.error('Error loading sidebar:', error);
        });
    }

    // Documents context menu functions
    function showDocumentsMenu(event) {
      // This function is now handled inline in addItemToDocuments
      // Keeping it for backwards compatibility
    }

    function closeDocumentsMenu() {
      const menu = document.getElementById('documentsContextMenu');
      if (menu) {
        menu.classList.remove('show');
      }
    }

    let submenuTimeout;
    let submenuVisible = false;

    function showNewSubmenu() {
      clearTimeout(submenuTimeout);
      const submenu = document.getElementById('newSubmenu');
      if (submenu) {
        submenu.style.display = 'block';
        submenuVisible = true;
      }
    }

    function hideNewSubmenu() {
      clearTimeout(submenuTimeout);
      // Wait 500ms before hiding to allow cursor movement to submenu
      submenuTimeout = setTimeout(() => {
        const submenu = document.getElementById('newSubmenu');
        if (submenu && !submenuVisible) {
          submenu.style.display = 'none';
        }
      }, 500);
    }

    // Keep submenu visible when hovering over it
    document.addEventListener('DOMContentLoaded', function() {
      const submenu = document.getElementById('newSubmenu');
      if (submenu) {
        submenu.addEventListener('mouseenter', function() {
          submenuVisible = true;
          clearTimeout(submenuTimeout);
        });

        submenu.addEventListener('mouseleave', function() {
          submenuVisible = false;
          setTimeout(() => {
            if (!submenuVisible) {
              submenu.style.display = 'none';
            }
          }, 500);
        });
      }
    });

    let currentType = 'workspace';

    function createWorkspace() {
      closeDocumentsMenu();
      currentType = 'workspace';
      openWorkspaceModal('New Workspace');
    }

    function createFile() {
      closeDocumentsMenu();
      // Trigger file input
      const fileInput = document.getElementById('fileUploadInput');
      fileInput.click();
    }

    function createFolder() {
      closeDocumentsMenu();
      currentType = 'folder';
      openWorkspaceModal('New Folder');
    }

    function openWorkspaceModal(title) {
      const modal = document.getElementById('workspaceModal');
      const titleEl = document.getElementById('workspaceModalTitle');
      const input = document.getElementById('workspaceNameInput');
      
      if (!modal || !titleEl || !input) return;
      
      titleEl.textContent = title;
      modal.classList.add('show');
      input.value = '';
      input.focus();
    }

    function closeWorkspaceModal() {
      const modal = document.getElementById('workspaceModal');
      const input = document.getElementById('workspaceNameInput');
      
      if (!modal || !input) return;
      
      modal.classList.remove('show');
      input.value = '';
    }

    let currentFolder = null; // Track which folder is currently selected
    let folderStack = []; // Track folder hierarchy
    let selectedItemElement = null; // Track the currently right-clicked item
    let selectedItemData = null; // Track data about the selected item

    // Toggle folder expand/collapse
    function toggleFolder(folderItem, folderId) {
      const isExpanded = folderItem.classList.contains('expanded');
      const childrenContainer = folderItem.querySelector('.folder-children');
      const chevron = folderItem.querySelector('.chevron-icon');
      
      if (isExpanded) {
        // Collapse
        folderItem.classList.remove('expanded');
        if (chevron) {
          chevron.setAttribute('src', 'assets/images/chevron-right.svg');
        }
        if (childrenContainer) {
          childrenContainer.style.display = 'none';
        }
      } else {
        // Expand
        folderItem.classList.add('expanded');
        if (chevron) {
          chevron.setAttribute('src', 'assets/images/chevron-down.svg');
        }
        if (childrenContainer) {
          childrenContainer.style.display = 'block';
        }
      }
    }

    function addItemToDocuments(name, type, parentFolder = null) {
      // Find the documents content area
      const documentsContent = document.querySelector('.documents-content');
      if (!documentsContent) return;
      
      // Determine where to add the item
      let targetContainer = documentsContent;
      
      if (parentFolder) {
        // Find the parent folder element
        const parentElement = document.querySelector(`[data-folder-id="${parentFolder}"]`);
        if (parentElement) {
          // Get or create the nested container
          let nestedContainer = parentElement.querySelector('.folder-children');
          if (!nestedContainer) {
            nestedContainer = document.createElement('div');
            nestedContainer.className = 'folder-children';
            nestedContainer.style.marginLeft = '16px';
            parentElement.appendChild(nestedContainer);
          }
          targetContainer = nestedContainer;
        }
      }
      
      // Create the item element
      const item = document.createElement('div');
      item.className = 'documents-item';
      item.style.userSelect = 'none';
      item.setAttribute('unselectable', 'on');
      
      if (type === 'folder') {
        const folderId = 'folder-' + Date.now();
        item.setAttribute('data-folder-id', folderId);
        
        // Create the header div
        const headerDiv = document.createElement('div');
        headerDiv.style.cssText = 'display: flex; align-items: center; padding: 4px 8px;';
        headerDiv.innerHTML = `
          <img src="assets/images/chevron-down.svg" alt="Expand" class="chevron-icon" style="width: 12px; height: 12px; margin-right: 4px;">
          <img src="assets/images/icon-folder.svg" alt="Folder" style="width: 16px; height: 16px; opacity: 0.6; margin-right: 8px;">
          <span>${name}</span>
        `;
        
        // Create the children container
        const childrenContainer = document.createElement('div');
        childrenContainer.className = 'folder-children';
        childrenContainer.style.cssText = 'display: block; margin-left: 24px;';
        
        item.appendChild(headerDiv);
        item.appendChild(childrenContainer);
        
        // Make folder expandable
        item.style.cursor = 'pointer';
        
        // Add click handler to toggle folder - clicking anywhere on the folder header toggles it
        item.addEventListener('click', function(e) {
          e.stopPropagation();
          toggleFolder(item, folderId);
        });
        
        // Initialize as expanded
        item.classList.add('expanded');
      } else {
        // For files/workspaces, no additional indentation since they'll be added to the appropriate container
        item.innerHTML = `
          <div style="display: flex; align-items: center; padding: 4px 8px;">
            <img src="assets/images/icon-file.svg" alt="File" style="width: 16px; height: 16px; opacity: 0.6; margin-right: 8px;">
            <span>${name}</span>
          </div>
        `;
      }
      
      // Add click handler for workspace items
      if (type === 'workspace') {
        item.addEventListener('click', function(e) {
          e.stopPropagation();
          openWorkspace(name);
        });
      }
      
      // Add contextmenu handler with high priority
      item.oncontextmenu = function(e) {
        // Stop everything immediately
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        
        // Store the clicked element
        selectedItemElement = item;
        const itemName = item.querySelector('span')?.textContent || '';
        const itemType = type === 'folder' ? 'folder' : 'workspace';
        
        // Set currentFolder if this is a folder
        if (itemType === 'folder') {
          currentFolder = item.getAttribute('data-folder-id');
          console.log('Current folder set to:', currentFolder);
        }
        
        selectedItemData = {
          name: itemName,
          type: itemType,
          element: item,
          folderId: type === 'folder' ? item.getAttribute('data-folder-id') : null
        };
        
        // Show the menu
        const menu = document.getElementById('documentsContextMenu');
        if (menu) {
          const rect = item.getBoundingClientRect();
          
          // Force the menu to show with inline styles
          menu.style.setProperty('position', 'fixed', 'important');
          menu.style.setProperty('left', rect.right + 'px', 'important');
          menu.style.setProperty('top', rect.top + 'px', 'important');
          menu.style.setProperty('z-index', '999999', 'important');
          menu.style.setProperty('display', 'block', 'important');
          menu.style.setProperty('visibility', 'visible', 'important');
          
          // Auto-close after 2 seconds if not hovering
          let closeTimeout = setTimeout(() => {
            menu.style.display = 'none';
          }, 2000);
          
          // Cancel auto-close on hover
          menu.addEventListener('mouseenter', () => {
            clearTimeout(closeTimeout);
          });
          
          menu.addEventListener('mouseleave', () => {
            closeTimeout = setTimeout(() => {
              menu.style.display = 'none';
            }, 2000);
          });
          
          // Close on outside click
          setTimeout(() => {
            document.addEventListener('click', function closeMenu(e) {
              if (!menu.contains(e.target)) {
                clearTimeout(closeTimeout);
                menu.style.display = 'none';
                document.removeEventListener('click', closeMenu);
              }
            });
          }, 0);
        }
        
        return false;
      };
      
      // Add hover effect
      item.addEventListener('mouseenter', function() {
        this.style.background = '#f3f4f6';
      });
      item.addEventListener('mouseleave', function() {
        this.style.background = 'transparent';
      });
      
      targetContainer.appendChild(item);
    }

    // Update confirmWorkspace to add items to current folder
    function confirmWorkspace() {
      const input = document.getElementById('workspaceNameInput');
      const name = input.value.trim();
      
      if (name === '') {
        alert('Please enter a name');
        return;
      }
      
      console.log('Creating', currentType, ':', name, 'in folder:', currentFolder);
      closeWorkspaceModal();
      
      // Add the workspace/folder to the Documents section
      addItemToDocuments(name, currentType, currentFolder);
      
      alert(`${currentType} "${name}" created!`);
    }

    // Handle file upload
    document.addEventListener('DOMContentLoaded', function() {
      // Handle image upload
      const imageInput = document.getElementById('imageUploadInput');
      if (imageInput) {
        imageInput.addEventListener('change', function(e) {
          const files = e.target.files;
          if (files.length > 0) {
            console.log('Images selected:', files.length);
            
            // Display uploaded images
            files.forEach(file => {
              const reader = new FileReader();
              reader.onload = function(e) {
                // Create image card or display
                alert(`Image "${file.name}" uploaded successfully!`);
              };
              reader.readAsDataURL(file);
            });
            
            alert(`Uploaded ${files.length} image(s)!`);
            // Reset the image input
            imageInput.value = '';
          }
        });
      }

      // Handle file upload
      const fileInput = document.getElementById('fileUploadInput');
      if (fileInput) {
        fileInput.addEventListener('change', function(e) {
          const files = e.target.files;
          if (files.length > 0) {
            console.log('Files selected:', files.length);
            
            // Create workspace items for each uploaded file
            for (let i = 0; i < files.length; i++) {
              const fileName = files[i].name;
              addItemToDocuments(fileName, 'workspace', currentFolder);
            }
            
            alert(`Uploaded ${files.length} file(s)!`);
            // Reset the file input
            fileInput.value = '';
          }
        });
      }
    });

    function renameDocument() {
      if (!selectedItemElement || !selectedItemData) {
        alert('No item selected');
        closeDocumentsMenu();
        return;
      }
      
      const oldName = selectedItemData.name;
      const newName = prompt(`Rename "${oldName}" to:`, oldName);
      
      if (newName && newName.trim() !== '' && newName !== oldName) {
        const spanElement = selectedItemElement.querySelector('span');
        if (spanElement) {
          spanElement.textContent = newName;
          selectedItemData.name = newName;
        }
        alert(`Renamed "${oldName}" to "${newName}"`);
      }
      closeDocumentsMenu();
    }

    function duplicateDocument() {
      if (!selectedItemElement || !selectedItemData) {
        alert('No item selected');
        closeDocumentsMenu();
        return;
      }
      
      const originalName = selectedItemData.name;
      const duplicatedName = `${originalName} (1)`;
      
      // Determine the type
      const itemType = selectedItemData.type === 'folder' ? 'folder' : 'workspace';
      
      // Add the duplicated item
      addItemToDocuments(duplicatedName, itemType);
      
      alert(`Duplicated "${originalName}"`);
      closeDocumentsMenu();
    }

    function deleteDocument() {
      if (!selectedItemElement || !selectedItemData) {
        alert('No item selected');
        closeDocumentsMenu();
        return;
      }
      
      const itemName = selectedItemData.name;
      if (confirm(`Are you sure you want to delete "${itemName}"?`)) {
        selectedItemElement.remove();
        alert(`Deleted "${itemName}"`);
      }
      closeDocumentsMenu();
    }

    function copyDocumentLink() {
      if (!selectedItemData) {
        alert('No item selected');
        closeDocumentsMenu();
        return;
      }
      
      const itemName = selectedItemData.name;
      const itemType = selectedItemData.type;
      const baseUrl = window.location.origin;
      const link = `${baseUrl}/vault.html#${itemType}/${encodeURIComponent(itemName)}`;
      
      // Copy to clipboard
      navigator.clipboard.writeText(link).then(() => {
        alert('Link copied to clipboard!');
      }).catch(err => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = link;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert('Link copied to clipboard!');
      });
      
      closeDocumentsMenu();
    }

    function getDocumentInfo() {
      if (!selectedItemElement || !selectedItemData) {
        closeDocumentsMenu();
        return;
      }
      
      // Get current date
      const now = new Date();
      const dateStr = `${now.getMonth() + 1}/${now.getDate()}/${now.getFullYear()}`;
      
      // Generate a random ID
      const id = Math.floor(Math.random() * 100);
      
      // Populate modal with info
      document.getElementById('folderInfoName').textContent = selectedItemData.name;
      document.getElementById('folderInfoId').textContent = id.toString();
      document.getElementById('folderInfoDate').textContent = dateStr;
      document.getElementById('folderInfoBy').textContent = 'Current User';
      document.getElementById('folderInfoParent').textContent = '63';
      document.getElementById('folderInfoPath').textContent = `jan 2024 / Documents / ${selectedItemData.name}`;
      document.getElementById('folderInfoSize').textContent = '0 B';
      document.getElementById('folderInfoFiles').textContent = '0';
      document.getElementById('folderInfoBreakdown').textContent = '-';
      document.getElementById('folderInfoDesc').textContent = 'No description available';
      
      // Show modal
      const modal = document.getElementById('folderInfoModal');
      if (modal) {
        modal.classList.add('show');
      }
      
      closeDocumentsMenu();
    }

    function closeFolderInfoModal() {
      const modal = document.getElementById('folderInfoModal');
      if (modal) {
        modal.classList.remove('show');
      }
    }

    // Card Modal Functions
    function openCardModal() {
      const modal = document.getElementById('cardModal');
      if (!modal) return;
      
      modal.classList.add('show');
      
      // Focus on the first input
      const titleInput = document.getElementById('cardTitleInput');
      if (titleInput) {
        titleInput.focus();
      }
      
      // Add click handler for calendar icon to open date picker
      setTimeout(() => {
        const calendarIcon = modal.querySelector('.card-calendar-icon');
        const dateInput = document.getElementById('cardDateInput');
        
        if (calendarIcon && dateInput) {
          calendarIcon.addEventListener('click', function(e) {
            e.preventDefault();
            if (dateInput) {
              dateInput.showPicker();
            }
          });
        }
      }, 100);
    }

    function closeCardModal() {
      const modal = document.getElementById('cardModal');
      if (!modal) return;
      
      modal.classList.remove('show');
      
      // Clear all inputs
      document.getElementById('cardTitleInput').value = '';
      document.getElementById('cardDescriptionInput').value = '';
      document.getElementById('cardPriorityInput').value = '';
      document.getElementById('cardAssigneeInput').value = '';
      document.getElementById('cardDateInput').value = '';
    }

    // Show Cards section
    function showCardsSection() {
      const cardsSection = document.querySelector('.cards-section');
      if (cardsSection) {
        cardsSection.style.display = 'block';
      }
    }

    // Show Notes editor
    function showNotesEditor() {
      const notesEditor = document.getElementById('pageHashtag');
      if (notesEditor) {
        notesEditor.style.display = 'block';
      }
    }

    // Trigger Image Upload
    function triggerImageUpload() {
      const imageInput = document.getElementById('imageUploadInput');
      if (imageInput) {
        imageInput.click();
      }
    }

    // Trigger File Upload
    function triggerFileUpload() {
      const fileInput = document.getElementById('fileUploadInput');
      if (fileInput) {
        fileInput.click();
      }
    }

    function saveCard() {
      const title = document.getElementById('cardTitleInput').value.trim();
      
      if (!title) {
        alert('Please enter a title');
        return;
      }
      
      // Get all card data
      const description = document.getElementById('cardDescriptionInput').value.trim();
      const priority = document.getElementById('cardPriorityInput').value.trim();
      const assignee = document.getElementById('cardAssigneeInput').value.trim();
      const date = document.getElementById('cardDateInput').value;
      
      // Save using cardManager
      if (typeof saveCardToManager === 'function') {
        saveCardToManager(title, description, priority, assignee, date);
        console.log('Card saved successfully');
      } else {
        console.error('saveCardToManager function not found');
        alert('Error: Card manager not available');
      }
      
      // Close the modal
      closeCardModal();
      
      // Show success message
      alert('Card saved successfully!');
    }

    // Toggle right sidebar
    function toggleRightSidebar() {
      const sidebar = document.getElementById('rightSidebar');
      if (sidebar) {
        const isShowing = sidebar.classList.contains('show');
        sidebar.classList.toggle('show');
        
        // Update the sidebar content when opening
        if (!isShowing) {
          // Remove any existing backdrop first to prevent duplicates
          const existingBackdrop = document.querySelector('.sidebar-backdrop');
          if (existingBackdrop) existingBackdrop.remove();
          
          setTimeout(() => {
            // Update tags, links, and references
            if (typeof cardManager !== 'undefined' && cardManager) {
              cardManager.updatePageTags();
              cardManager.updateExternalLinks();
              cardManager.updateReferencedBy();
            }
            
            // Add click listener to backdrop (only one)
            const backdrop = document.createElement('div');
            backdrop.className = 'sidebar-backdrop';
            backdrop.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); z-index: 999;';
            backdrop.onclick = () => toggleRightSidebar();
            document.body.appendChild(backdrop);
          }, 0);
        } else {
          // Remove backdrop when closing
          const backdrop = document.querySelector('.sidebar-backdrop');
          if (backdrop) backdrop.remove();
        }
      }
    }

    // Vault Settings Functions
    function openVaultSettings() {
      const modal = document.getElementById('vaultSettingsModal');
      const titleElement = document.querySelector('.vault-settings-title');
      if (modal) {
        // Update title to default Settings
        if (titleElement) {
          titleElement.textContent = 'Settings';
        }
        modal.style.display = 'flex';
      }
    }

    function closeVaultSettings() {
      const modal = document.getElementById('vaultSettingsModal');
      if (modal) {
        modal.style.display = 'none';
      }
    }

    function switchSettingsTab(tabName) {
      // Remove active class from all tabs
      document.querySelectorAll('.vault-settings-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Hide all content
      document.querySelectorAll('.vault-settings-content').forEach(content => {
        content.style.display = 'none';
      });
      
      // Show selected tab and content
      if (tabName === 'filters') {
        document.querySelectorAll('.vault-settings-tab')[0].classList.add('active');
        document.getElementById('filtersTab').style.display = 'block';
      } else if (tabName === 'display') {
        document.querySelectorAll('.vault-settings-tab')[1].classList.add('active');
        document.getElementById('displayTab').style.display = 'block';
        
        // Attach click handlers to eye icons
        attachEyeIconHandlers();
      }
    }

    // Attach click handlers to eye icons
    function attachEyeIconHandlers() {
      const eyeIcons = document.querySelectorAll('.column-eye-icon');
      eyeIcons.forEach(icon => {
        // Remove existing handlers to avoid duplicates
        const newIcon = icon.cloneNode(true);
        icon.parentNode.replaceChild(newIcon, icon);
        
        // Add click handler
        newIcon.style.cursor = 'pointer';
        newIcon.onclick = function(e) {
          e.stopPropagation();
          toggleColumnVisibility(this);
        };
      });
    }

    // Toggle column visibility
    function toggleColumnVisibility(eyeIcon) {
      const columnItem = eyeIcon.closest('.column-item');
      const isRequired = columnItem.classList.contains('required');
      
      // Don't allow hiding required columns
      if (isRequired) {
        return;
      }
      
      // Toggle visibility state - check by looking at the opacity or source
      const isVisible = eyeIcon.style.opacity === '' || eyeIcon.style.opacity === '0.6' || eyeIcon.style.opacity === '1';
      
      if (isVisible) {
        // Hide column - change to gray eye-off icon
        eyeIcon.src = 'assets/images/eye-off.svg';
        eyeIcon.style.opacity = '0.5';
        columnItem.style.opacity = '0.6';
        columnItem.style.background = '#f9fafb';
      } else {
        // Show column - change to blue eye icon
        eyeIcon.src = 'assets/images/eye.svg';
        eyeIcon.style.opacity = '0.8';
        columnItem.style.opacity = '1';
        columnItem.style.background = '#f3f4f6';
      }
    }

    function addFilterRow() {
      const container = document.getElementById('filtersContainer');
      const newFilter = document.createElement('div');
      newFilter.className = 'filter-group';
      newFilter.innerHTML = `
        <select class="filter-select">
          <option>Name</option>
          <option>Description</option>
          <option>Assignee</option>
          <option>Priority</option>
          <option>Due Date</option>
        </select>
        <select class="filter-select">
          <option>Is</option>
          <option>Is not</option>
          <option>Contains</option>
          <option>Does not contain</option>
        </select>
        <div class="filter-input-wrapper">
          <input type="text" class="filter-input" placeholder="Enter value">
          <img src="assets/images/close-icon.svg" alt="Clear" class="filter-clear" onclick="this.parentElement.parentElement.remove()">
        </div>
      `;
      container.appendChild(newFilter);
    }

    function clearAllFilters() {
      const container = document.getElementById('filtersContainer');
      container.innerHTML = '';
      addFilterRow(); // Add one empty filter row back
    }

    function saveAsNewView() {
      alert('View saved successfully!');
      closeVaultSettings();
    }

    // Toggle add menu
    function toggleAddMenu() {
      const menu = document.getElementById('addMenuList');
      if (menu) {
        menu.classList.toggle('show');
      }
      
      // Close menu when clicking outside
      document.addEventListener('click', function closeMenuOnClick(e) {
        if (!menu.contains(e.target) && !document.querySelector('.nav-add').contains(e.target)) {
          menu.classList.remove('show');
          document.removeEventListener('click', closeMenuOnClick);
        }
      });
    }

    // Tab management
    let tabs = [];
    let activeTabId = null;

    // Initialize with a default tab when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Create a default tab
      setTimeout(() => {
        if (tabs.length === 0) {
          createTab('New Page');
        }
      }, 500);
    });

    function createTab(name) {
      const tabId = 'tab_' + Date.now();
      const tab = {
        id: tabId,
        name: name,
        element: null
      };
      
      tabs.push(tab);
      activeTabId = tabId;
      renderTabs();
      return tabId;
    }

    function renderTabs() {
      const container = document.getElementById('tabsContainer');
      if (!container) return;
      
      container.innerHTML = '';
      
      tabs.forEach(tab => {
        const tabElement = document.createElement('div');
        tabElement.className = 'tab-item' + (tab.id === activeTabId ? ' active' : '');
        tabElement.innerHTML = `
          <span>${tab.name}</span>
          <img src="assets/images/close-icon.svg" alt="Close" class="tab-close" onclick="event.stopPropagation(); closeTab('${tab.id}')">
        `;
        tabElement.onclick = () => switchTab(tab.id);
        tab.element = tabElement;
        container.appendChild(tabElement);
      });
      
      // Also render bottom nav pages
      renderBottomNavPages();
    }

    // Render all pages in bottom navigation
    function renderBottomNavPages() {
      const container = document.getElementById('navPagesContainer');
      if (!container) return;
      
      container.innerHTML = '';
      
      tabs.forEach(tab => {
        const pageItem = document.createElement('span');
        pageItem.className = 'nav-page-item' + (tab.id === activeTabId ? ' active' : '');
        pageItem.textContent = tab.name;
        pageItem.onclick = (e) => {
          e.stopPropagation();
          switchTab(tab.id);
        };
        pageItem.ondblclick = (e) => {
          e.stopPropagation();
          editBottomNavPageName(tab, pageItem);
        };
        pageItem.oncontextmenu = (e) => {
          e.preventDefault();
          showPageContextMenu(e, tab, pageItem);
        };
        container.appendChild(pageItem);
      });
    }

    // Show context menu for page item
    function showPageContextMenu(event, tab, pageItem) {
      // Remove any existing menu
      const existingMenu = document.getElementById('pageContextMenu');
      if (existingMenu) {
        existingMenu.remove();
      }

      // Create context menu
      const menu = document.createElement('div');
      menu.id = 'pageContextMenu';
      menu.className = 'page-context-menu';
      menu.style.display = 'block';
      menu.innerHTML = `
        <div class="page-context-menu-item" onclick="handlePageAction('${tab.id}', 'new')">New</div>
        <div class="page-context-menu-item" onclick="handlePageAction('${tab.id}', 'delete')">Delete</div>
        <div class="page-context-menu-item" onclick="handlePageAction('${tab.id}', 'duplicate')">Duplicate</div>
        <div class="page-context-menu-item" onclick="handlePageAction('${tab.id}', 'rename')">Rename Page</div>
      `;

      // Position menu
      document.body.appendChild(menu);
      const rect = pageItem.getBoundingClientRect();
      menu.style.left = rect.left + 'px';
      menu.style.top = (rect.top - menu.offsetHeight - 5) + 'px';

      // Close menu when clicking outside
      setTimeout(() => {
        document.addEventListener('click', function closeMenu(e) {
          if (!menu.contains(e.target) && e.target !== pageItem) {
            menu.remove();
            document.removeEventListener('click', closeMenu);
          }
        }, { once: true });
      }, 10);
    }

    // Handle page context menu actions
    function handlePageAction(tabId, action) {
      const tab = tabs.find(t => t.id === tabId);
      if (!tab) return;

      const menu = document.getElementById('pageContextMenu');
      if (menu) menu.remove();

      switch(action) {
        case 'new':
          createNewPage();
          break;
        case 'delete':
          closeTab(tabId);
          break;
        case 'duplicate':
          // Find the base name and generate next number
          const baseName = tab.name.replace(/\(\d+\)$/, '');
          let maxNumber = 0;
          
          // Find the highest number used for this base name
          tabs.forEach(t => {
            const match = t.name.match(/^(.+?)\((\d+)\)$/);
            if (match && match[1] === baseName) {
              maxNumber = Math.max(maxNumber, parseInt(match[2]));
            }
          });
          
          // Generate new name with next number
          const newName = maxNumber === 0 ? baseName : `${baseName}(${maxNumber + 1})`;
          const newTabId = createTab(newName);
          loadWorkspaceContent(newName);
          break;
        case 'rename':
          const pageItem = document.querySelector('.nav-page-item.active');
          if (pageItem) {
            editBottomNavPageName(tab, pageItem);
          }
          break;
      }
    }

    function switchTab(tabId) {
      activeTabId = tabId;
      renderTabs();
      
      const tab = tabs.find(t => t.id === tabId);
      if (tab) {
        // Reload content for this tab
        const pageContent = document.querySelector('.page-content');
        if (pageContent) {
          loadWorkspaceContent(tab.name);
        }
      }
    }

    // Navigate to previous page (left chevron)
    function navigatePreviousPage() {
      if (tabs.length === 0) return;
      
      const currentIndex = tabs.findIndex(t => t.id === activeTabId);
      const previousIndex = currentIndex > 0 ? currentIndex - 1 : tabs.length - 1;
      switchTab(tabs[previousIndex].id);
    }

    // Navigate to next page (right chevron)
    function navigateNextPage() {
      if (tabs.length === 0) return;
      
      const currentIndex = tabs.findIndex(t => t.id === activeTabId);
      const nextIndex = currentIndex < tabs.length - 1 ? currentIndex + 1 : 0;
      switchTab(tabs[nextIndex].id);
    }

    // Edit page name in bottom nav (double-click to edit)
    function editBottomNavPageName(tab, pageItem) {
      pageItem.contentEditable = true;
      pageItem.style.background = '#3b82f6';
      pageItem.style.color = 'white';
      pageItem.style.padding = '2px 6px';
      pageItem.style.borderRadius = '4px';
      pageItem.style.outline = 'none';
      pageItem.style.textDecoration = 'none';
      
      // Focus and select all text
      setTimeout(() => {
        pageItem.focus();
        const range = document.createRange();
        range.selectNodeContents(pageItem);
        const sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
      }, 10);
      
      // Handle blur to save
      pageItem.addEventListener('blur', function saveName() {
        this.contentEditable = false;
        const newName = this.textContent.trim() || 'New Page';
        tab.name = newName;
        this.textContent = newName;
        this.style.background = '';
        this.style.color = '';
        this.style.padding = '';
        this.style.borderRadius = '';
        
        // Update tab in top bar
        renderTabs();
        
        // Remove listener
        this.removeEventListener('blur', saveName);
      }, { once: true });
      
      // Handle Enter key
      pageItem.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          this.blur();
        }
      }, { once: true });
    }

    function closeTab(tabId) {
      if (tabs.length <= 1) return; // Don't close the last tab
      
      tabs = tabs.filter(t => t.id !== tabId);
      
      if (activeTabId === tabId) {
        activeTabId = tabs.length > 0 ? tabs[0].id : null;
        if (activeTabId) {
          switchTab(activeTabId);
        }
      }
      
      renderTabs();
    }

    function openNewTab() {
      createTab('New Page');
    }

    // Create new page from bottom nav plus icon
    function createNewPage() {
      const tabId = createTab('New Page');
      const tab = tabs.find(t => t.id === tabId);
      
      // Load the content for this tab
      if (tab) {
        loadWorkspaceContent(tab.name);
      }
      
      // Find and make the new page name editable in bottom nav
      setTimeout(() => {
        const activePageItem = document.querySelector('.nav-page-item.active');
        if (activePageItem && tab) {
          editBottomNavPageName(tab, activePageItem);
        }
      }, 50);
    }

    function loadWorkspaceContent(workspaceName) {
      const pageContent = document.querySelector('.page-content');
      if (!pageContent) return;
      
      fetch('components/page-content.html')
        .then(response => response.text())
        .then(html => {
          pageContent.innerHTML = html;
          
          // Re-render bottom nav pages after content loads
          setTimeout(() => {
            renderBottomNavPages();
            
            // Re-attach event handlers for bottom nav icons
            const leftChevron = document.querySelector('.page-bottom-nav .nav-arrow[onclick="navigatePreviousavPage()"]');
            const rightChevron = document.querySelector('.page-bottom-nav .nav-arrow[onclick="navigateNextPage()"]');
            const plusIcon = document.querySelector('.page-bottom-nav .nav-add-circle[onclick="createNewPage()"]');
            
            if (leftChevron) {
              leftChevron.onclick = navigatePreviousPage;
            }
            if (rightChevron) {
              rightChevron.onclick = navigateNextPage;
            }
            if (plusIcon) {
              plusIcon.onclick = createNewPage;
            }
          }, 50);
          
          // Update breadcrumb with workspace name
          const breadcrumb = document.getElementById('pageBreadcrumb');
          if (breadcrumb) {
            breadcrumb.textContent = `jan 2024 / Documents / ${workspaceName}`;
          }
          
          // Update hashtag/notes editor
          setTimeout(() => {
            const notesEditor = document.querySelector('.notes-editor');
            if (notesEditor) {
              notesEditor.textContent = `#${workspaceName}`;
              
              // Event listener is already attached globally in card.js using event delegation
              // No need to add duplicate listener here
            }
          }, 100);
          
          // Update page title
          const pageTitle = document.querySelector('.page-title');
          if (pageTitle) {
            pageTitle.textContent = workspaceName;
          }
          
          // Add click handlers to add menu items using event delegation
          const addMenu = document.getElementById('addMenuList');
          if (addMenu) {
            addMenu.addEventListener('click', function(e) {
              const clickedItem = e.target.closest('.menu-item');
              if (clickedItem) {
                const text = clickedItem.textContent.trim();
                // Close the menu
                this.classList.remove('show');
                
                if (text === 'Task List') {
                  // Add a new task row
                  addTaskRow();
                } else if (text === 'Card') {
                  // Show Cards section and open the card modal
                  showCardsSection();
                  openCardModal();
                } else if (text === 'Image') {
                  // Upload image
                  triggerImageUpload();
                } else if (text === 'Upload File') {
                  // Upload file
                  triggerFileUpload();
                } else if (text === 'Note') {
                  // Show Notes editor
                  showNotesEditor();
                }
              }
            });
          }
        })
        .catch(error => {
          console.error('Error loading page content:', error);
        });
    }

    // Open workspace
    function openWorkspace(name) {
      // Check if tab already exists
      let existingTab = tabs.find(t => t.name === name);
      
      if (existingTab) {
        switchTab(existingTab.id);
      } else {
        const tabId = createTab(name);
        loadWorkspaceContent(name);
      }
    }

    // Add task row
    function addTaskRow() {
      const tbody = document.getElementById('tasksTableBody');
      if (!tbody) return;
      
      // Remove empty state if present
      const emptyState = tbody.querySelector('.empty-state');
      if (emptyState) {
        emptyState.remove();
      }
      
      // Create new row
      const row = document.createElement('tr');
      row.className = 'task-row';
      
      // Create the date input with ID
      const dateInputId = 'date-input-' + Date.now();
      
      row.innerHTML = `
        <td><input type="text" class="task-input" placeholder="Task name"></td>
        <td><input type="text" class="task-input" placeholder="Description"></td>
        <td><input type="text" class="task-input" placeholder="Priority"></td>
        <td style="position: relative;">
          <input type="date" id="${dateInputId}" class="task-input" style="padding-right: 30px;">
          <img src="assets/images/calendar.svg" alt="Calendar" class="calendar-trigger" data-date-input="${dateInputId}" style="width: 16px; height: 16px; opacity: 0.5; position: absolute; right: 8px; top: 50%; transform: translateY(-50%); cursor: pointer;">
        </td>
      `;
      
      tbody.appendChild(row);
      
      // Add click handler to calendar icon to open date picker
      const calendarIcon = row.querySelector('.calendar-trigger');
      if (calendarIcon) {
        calendarIcon.addEventListener('click', function(e) {
          e.preventDefault();
          const dateInput = document.getElementById(dateInputId);
          if (dateInput) {
            dateInput.showPicker();
          }
        });
      }
      
      // Focus first input
      const firstInput = row.querySelector('.task-input');
      if (firstInput) {
        firstInput.focus();
      }
    }

    // Add column (placeholder for future functionality)
    function addColumn() {
      alert('Add Column functionality coming soon!');
    }

    // Open vault settings with Display tab for column selection
    function openColumnSettings() {
      const modal = document.getElementById('vaultSettingsModal');
      const titleElement = document.querySelector('.vault-settings-title');
      if (modal) {
        // Update title
        if (titleElement) {
          titleElement.textContent = 'Select Columns to Display';
        }
        modal.style.display = 'flex';
        // Switch to Display tab
        switchSettingsTab('display');
      }
    }

    // Toggle Documents section collapse/expand
    function toggleDocumentsSection() {
      const documentsHeader = document.getElementById('documentsHeaderSection');
      const documentsContent = document.querySelector('.documents-content');
      const chevron = documentsHeader ? documentsHeader.querySelector('.chevron-icon') : null;
      
      if (!documentsHeader || !documentsContent || !chevron) return;
      
      const isExpanded = documentsHeader.classList.contains('expanded');
      const allItems = documentsContent.querySelectorAll('.documents-item');
      
      if (isExpanded) {
        // Collapse - hide the content
        documentsHeader.classList.remove('expanded');
        chevron.setAttribute('src', 'assets/images/chevron-right.svg');
        documentsContent.style.display = 'none';
        allItems.forEach(item => item.style.display = 'none');
      } else {
        // Expand - show the content
        documentsHeader.classList.add('expanded');
        chevron.setAttribute('src', 'assets/images/chevron-down.svg');
        documentsContent.style.display = 'block';
        allItems.forEach(item => item.style.display = 'block');
      }
    }

    // Load sidebar when page loads
    document.addEventListener('DOMContentLoaded', function() {
      loadSidebar();
      
      // Add collapse/expand and context menu functionality to documents header
      setTimeout(() => {
        const documentsHeader = document.getElementById('documentsHeaderSection');
        if (documentsHeader) {
          // Initially mark as expanded
          documentsHeader.classList.add('expanded');
          
          // Add click handler for collapse/expand
          documentsHeader.addEventListener('click', function(e) {
            // Only toggle if clicking on the header itself, not on context menu triggers
            if (!e.target.closest('#documentsContextMenu')) {
              const clickedChevron = e.target.closest('.chevron-icon');
              const clickedContextMenu = e.target.closest('.context-menu');
              
              // Toggle only if clicked outside context menu
              if (!clickedContextMenu && (!clickedChevron || clickedChevron)) {
                toggleDocumentsSection();
              }
            }
          });
          
          documentsHeader.oncontextmenu = function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const menu = document.getElementById('documentsContextMenu');
            if (menu) {
              const rect = documentsHeader.getBoundingClientRect();
              menu.style.setProperty('position', 'fixed', 'important');
              menu.style.setProperty('left', rect.left + 'px', 'important');
              menu.style.setProperty('top', rect.bottom + 'px', 'important');
              menu.style.setProperty('z-index', '999999', 'important');
              menu.style.setProperty('display', 'block', 'important');
              menu.style.setProperty('visibility', 'visible', 'important');
              
              // Auto-close after 2 seconds if not hovering
              let closeTimeout = setTimeout(() => {
                menu.style.display = 'none';
              }, 2000);
              
              // Cancel auto-close on hover
              menu.addEventListener('mouseenter', () => {
                clearTimeout(closeTimeout);
              });
              
              menu.addEventListener('mouseleave', () => {
                closeTimeout = setTimeout(() => {
                  menu.style.display = 'none';
                }, 2000);
              });
              
              // Close on outside click
              setTimeout(() => {
                document.addEventListener('click', function closeMenu(e) {
                  if (!menu.contains(e.target)) {
                    clearTimeout(closeTimeout);
                    menu.style.display = 'none';
                    document.removeEventListener('click', closeMenu);
                  }
                });
              }, 0);
            }
            
            return false;
          };
        }
      }, 500);
    });

    // Load navbar component
    const navbarScript = document.createElement('script');
    navbarScript.type = 'module';
    navbarScript.src = 'assets/js/navbar.js';
    document.head.appendChild(navbarScript);
  </script>
</body>
</html>

